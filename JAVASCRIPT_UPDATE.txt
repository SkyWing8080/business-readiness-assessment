# FORM JAVASCRIPT UPDATE - Quick Reference

## What to Change

Find your form submission code and replace it with this:

---

## COPY THIS CODE:

```javascript
// Get your form element (adjust selector if needed)
const form = document.getElementById('assessmentForm'); // or your form ID

form.addEventListener('submit', async function(e) {
  e.preventDefault();
  
  // Show "Submitting..." on button
  const submitButton = form.querySelector('button[type="submit"]');
  const originalText = submitButton.textContent;
  submitButton.textContent = 'Submitting...';
  submitButton.disabled = true;
  
  // Collect form data - UPDATE THE IDs TO MATCH YOUR FORM
  const formData = {
    // REQUIRED fields
    fullName: document.getElementById('fullName').value,
    email: document.getElementById('email').value,
    company: document.getElementById('company').value,
    jobTitle: document.getElementById('jobTitle').value,
    industry: document.getElementById('industry').value,
    companySize: document.getElementById('companySize').value,
    
    // OPTIONAL fields (use || '' for optional)
    phone: document.getElementById('phone')?.value || '',
    currentChallenges: document.getElementById('currentChallenges')?.value || '',
    businessGoals: document.getElementById('businessGoals')?.value || '',
    timeframe: document.getElementById('timeframe')?.value || '',
    budget: document.getElementById('budget')?.value || '',
    decisionMakingRole: document.getElementById('decisionMakingRole')?.value || '',
    additionalInfo: document.getElementById('additionalInfo')?.value || '',
    consentMarketing: document.getElementById('consentMarketing')?.checked || false
  };
  
  try {
    // POST to API endpoint
    const response = await fetch('/api/submit-assessment', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify(formData)
    });
    
    const result = await response.json();
    
    if (response.ok && result.success) {
      // Success!
      alert('Thank you! Check your email for assessment results.');
      form.reset();
    } else {
      // Error from API
      alert(result.error || 'Submission failed. Please try again.');
    }
    
  } catch (error) {
    // Network error
    console.error('Submission error:', error);
    alert('Network error. Please check your connection and try again.');
    
  } finally {
    // Reset button
    submitButton.textContent = originalText;
    submitButton.disabled = false;
  }
});
```

---

## CUSTOMIZE IT:

### 1. Update Form Selector

If your form has a different ID:
```javascript
// Change this line:
const form = document.getElementById('YOUR_FORM_ID');
```

### 2. Update Field IDs

Match each field to YOUR form's IDs:

**Example:** If your HTML has:
```html
<input id="user-name" />
```

Update the JavaScript:
```javascript
fullName: document.getElementById('user-name').value,
```

### 3. Map All Required Fields

These 6 are REQUIRED by the API:
- fullName
- email
- company
- jobTitle
- industry
- companySize

Make sure each maps to an input in your form!

---

## WHERE TO PUT THIS CODE:

### Option 1: Inside Your HTML
```html
<script>
  // Your existing code...
  
  // REPLACE your form submit handler with the code above
  
  // Rest of your code...
</script>
```

### Option 2: In Separate JS File
If you have `script.js` or similar, replace the form submission part.

---

## TESTING THE CHANGE:

### Before You Deploy:

1. Save the file
2. Open browser DevTools (F12)
3. Go to Console tab
4. Look for errors (red text)
5. Fix any "getElementById" errors by checking field IDs

### After You Deploy:

1. Visit: `https://your-app.vercel.app/assessment.html`
2. Open DevTools Console
3. Fill form and submit
4. Watch for:
   - Request to `/api/submit-assessment` in Network tab
   - Response with `{success: true, ...}`
   - Alert message appears
   - Email arrives in inbox

---

## COMMON FIELD ID MAPPINGS:

| API Field | Common HTML IDs | Your ID |
|-----------|----------------|---------|
| fullName | name, fullName, full-name, userName | _______ |
| email | email, emailAddress, email-address | _______ |
| company | company, companyName, organization | _______ |
| jobTitle | jobTitle, title, position, job-title | _______ |
| industry | industry, sector, industryType | _______ |
| companySize | companySize, size, company-size | _______ |

**Fill in the "Your ID" column with YOUR form's IDs!**

---

## TROUBLESHOOTING:

### Error: "Cannot read property 'value' of null"
**Problem:** Field ID doesn't match
**Solution:** Check your HTML, find the correct ID, update JavaScript

### Error: "Missing required fields"
**Problem:** Some required fields are empty or not mapped
**Solution:** Ensure all 6 required fields are included

### Form Doesn't Submit
**Problem:** JavaScript error or async not working
**Solution:** 
- Check browser console for errors
- Make sure function is `async`
- Verify `fetch` API is available (modern browsers)

---

## QUICK CHECKLIST:

Before committing:
- [ ] Updated form selector to match your form
- [ ] Updated all field IDs to match your HTML
- [ ] All 6 required fields are mapped
- [ ] Saved the file
- [ ] Tested in browser console (no errors)

After deploying:
- [ ] Form submits without errors
- [ ] Alert message appears
- [ ] Email arrives
- [ ] Lead appears in database

---

**That's the only code change needed! Everything else stays the same.**
